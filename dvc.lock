schema: '2.0'
stages:
  download:
    cmd: curl https://www.sqlitetutorial.net/wp-content/uploads/2018/03/chinook.zip
      --output data\chinook.zip
    deps:
    - path: https://www.sqlitetutorial.net/wp-content/uploads/2018/03/chinook.zip
      hash: md5
      checksum: '166007437711409482418900069603611846208'
      size: 305596
    outs:
    - path: data\chinook.zip
      hash: md5
      md5: 95b7b87de0ec059a407da6f7dc2888f7
      size: 305596
  unzip:
    cmd: tar -xf data\chinook.zip -C data
    deps:
    - path: data\chinook.zip
      hash: md5
      md5: 95b7b87de0ec059a407da6f7dc2888f7
      size: 305596
    outs:
    - path: data\chinook.db
      hash: md5
      md5: f2dd976ac500525eb862a008ba21609c
      size: 884736
  convert_to_graph:
    cmd: python convert_to_graph.py
    deps:
    - path: convert_to_graph.py
      hash: md5
      md5: a87b8b2b190824fe97b4424c54063395
      size: 11152
    - path: data\chinook.db
      hash: md5
      md5: f2dd976ac500525eb862a008ba21609c
      size: 884736
    outs:
    - path: data\graph.bin
      hash: md5
      md5: 28a72da2346eadcd91e904ea3c3a0cfd
      size: 998795
  train:
    cmd: python train.py
    deps:
    - path: data\graph.bin
      hash: md5
      md5: 28a72da2346eadcd91e904ea3c3a0cfd
      size: 998795
    - path: dataloader.py
      hash: md5
      md5: c8661ce66b96949131ca70710fc05699
      size: 3560
    - path: setup.py
      hash: md5
      md5: 85bce468b57566b5a60ed12f8dbaf631
      size: 782
    - path: train.py
      hash: md5
      md5: 5f436c5c27c47e41e49a747341d90a00
      size: 3376
    params:
      params.yaml:
        train:
          target_edge:
          - playlists
          - hasTrack
          - tracks
          num_val: 0.15
          num_test: 0.0
          num_layers: 5
          num_neighbors: 30
          batch_size: 512
          learning_rate: 1.376857957942358e-06
          hidden_channels: 30
          dropout: 0.2
          steps: 500
          norm: BatchNorm
